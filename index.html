<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Kirim Email & WhatsApp</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
    <style>
        .form-group {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="card shadow">
            <div class="card-header bg-primary text-white text-center">
                <h4>Form Kirim Email & WhatsApp</h4>
            </div>
            <div class="card-body">
                <form id="contactForm">
                    <!-- Nama -->
                    <div class="form-group">
                        <label for="nama"><i class="fas fa-user"></i> Nama</label>
                        <input type="text" class="form-control" id="nama" placeholder="Masukkan nama" required>
                    </div>

                    <!-- No Handphone -->
                    <div class="form-group">
                        <label for="nohp"><i class="fas fa-phone"></i> No Handphone</label>
                        <input type="tel" class="form-control" id="nohp" placeholder="Masukkan no handphone" required>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="email"><i class="fas fa-envelope"></i> Email</label>
                        <input type="email" class="form-control" id="email" placeholder="Masukkan email" required>
                    </div>

                    <!-- Keterangan -->
                    <div class="form-group">
                        <label for="keterangan"><i class="fas fa-comment"></i> Keterangan</label>
                        <textarea class="form-control" id="keterangan" rows="3" placeholder="Masukkan keterangan" required></textarea>
                    </div>

                    <!-- Tombol Submit -->
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-paper-plane"></i> Kirim
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <script>
        (function(){
            emailjs.init("YOUR_PUBLIC_KEY"); // Ganti dengan Public Key dari EmailJS
        })();

        document.getElementById("contactForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Mencegah pengiriman form default

            let nama = document.getElementById("nama").value.trim();
            let nohp = document.getElementById("nohp").value.trim();
            let email = document.getElementById("email").value.trim();
            let keterangan = document.getElementById("keterangan").value.trim();

            if (nama === "" || nohp === "" || email === "" || keterangan === "") {
                Swal.fire("Error!", "Semua bidang harus diisi!", "error");
                return;
            }

            // **1. Kirim Email dengan EmailJS**
            let emailParams = {
                nama: nama,
                nohp: nohp,
                email: email,
                keterangan: keterangan
            };

            emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", emailParams)
                .then(function(response) {
                    console.log("Email terkirim!", response);
                }, function(error) {
                    console.log("Gagal mengirim email", error);
                });

            // **2. Kirim ke WhatsApp**
            let adminWhatsApp = "081288422186"; // Ganti dengan nomor admin (tanpa +)
            let pesanWA = `Halo, saya ${nama}. Berikut data saya:\n\n`
                        + `📞 No HP: ${nohp}\n`
                        + `📧 Email: ${email}\n`
                        + `📝 Keterangan: ${keterangan}`;

            let whatsappURL = `https://wa.me/${adminWhatsApp}?text=${encodeURIComponent(pesanWA)}`;

            setTimeout(() => {
                Swal.fire({
                    title: "Sukses!",
                    text: "Form berhasil dikirim! Anda akan dialihkan ke WhatsApp.",
                    icon: "success",
                    timer: 3000,
                    showConfirmButton: false
                }).then(() => {
                    window.open(whatsappURL, "_blank");
                    document.getElementById("contactForm").reset();
                });
            }, 1000);
        });
    </script>
</body>
</html>
